---
title: Nouveautés du moteur de base de données - SQL Server 2017 | Microsoft Docs
ms.custom: ''
ms.date: 10/24/2017
ms.prod: sql
ms.reviewer: ''
ms.suite: sql
ms.technology: release-landing
ms.tgt_pltfrm: ''
ms.topic: conceptual
ms.assetid: 42f45b23-6509-45e8-8ee7-76a78f99a920
caps.latest.revision: 15
author: rothja
ms.author: jroth
manager: craigg
monikerRange: '>= sql-server-2017 || = sqlallproducts-allversions'
ms.openlocfilehash: af3f407144dcaf8fae1929d34afd83a3b8b42442
ms.sourcegitcommit: 02c889a1544b0859c8049827878d66b2301315f8
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/17/2018
---
# <a name="whats-new-in-database-engine---sql-server-2017"></a>Nouveautés du moteur de base de données - SQL Server 2017
[!INCLUDE[tsql-appliesto-ss2017-xxxx-xxxx-xxx-md](../includes/tsql-appliesto-ss2017-xxxx-xxxx-xxx-md.md)]

Cette rubrique décrit les améliorations apportées à [!INCLUDE[ssdenoversion-md](../includes/ssdenoversion-md.md)] pour [!INCLUDE[sssqlv14-md](../includes/sssqlv14-md.md)]. Cliquez sur les liens pour plus d’informations sur chaque élément.

> [!NOTE]  
> SQL Server 2017 comprend également les fonctionnalités ajoutées dans les Service Packs de SQL Server 2016. Pour plus d’informations sur ces éléments, consultez [Nouveautés de SQL Server 2016 (moteur de base de données)](../database-engine/configure-windows/what-s-new-in-sql-server-2016-database-engine.md).

**Améliorations**  

- CLR utilise la sécurité d’accès du code (CAS) dans le .NET Framework, qui n’est plus pris en charge comme limite de sécurité. Un assembly CLR créé avec `PERMISSION_SET = SAFE` peut être en mesure d’accéder à des ressources système externes, d’appeler du code non managé et d’acquérir des privilèges sysadmin. À compter de [!INCLUDE[sssqlv14-md](../includes/sssqlv14-md.md)], une option de `sp_configure` appelée `clr strict security` est introduite pour renforcer la sécurité des assemblys CLR. `clr strict security` est activée par défaut et traite les assemblys `SAFE` et `EXTERNAL_ACCESS` comme s’ils étaient marqués `UNSAFE`. L’option `clr strict security` peut être désactivée pour assurer une compatibilité descendante, mais ceci n’est pas recommandé. Microsoft recommande que tous les assemblys soient signés par un certificat ou une clé asymétrique avec une connexion correspondante à laquelle a été accordée l’autorisation `UNSAFE ASSEMBLY` dans la base de données master. Vous pouvez ajouter des assemblys CLR à une liste verte au titre de solution de contournement pour la fonctionnalité `clr strict security`. [sp_add_trusted_assembly](../relational-databases/system-stored-procedures/sys-sp-add-trusted-assembly-transact-sql.md), [sp_drop_trusted_assembly](../relational-databases/system-stored-procedures/sys-sp-drop-trusted-assembly-transact-sql.md) et [sys.trusted_asssemblies](../relational-databases/system-catalog-views/sys-trusted-assemblies-transact-sql.md) sont ajoutés pour prendre en charge la liste des assemblys approuvés. Pour plus d’informations, consultez [CLR strict security](configure-windows/clr-strict-security.md).  
- Une nouvelle fonction de gestion dynamique, [sys.dm_db_log_stats](../relational-databases/system-dynamic-management-views/sys-dm-db-log-stats-transact-sql.md), expose un récapitulatif des informations et des attributs sur les fichiers journaux des transactions. Elle est utile pour surveiller l’intégrité du journal des transactions.  
- Reconstruction d’index en ligne pouvant être reprise. La reconstruction d’index en ligne pouvant être reprise vous permet de reprendre une opération de reconstruction d’index en ligne là où elle s’est arrêtée après un échec (par exemple, un basculement vers un réplica ou un espace disque insuffisant). Vous pouvez également interrompre et reprendre ultérieurement une opération de reconstruction d’index en ligne. Par exemple, vous pouvez avoir besoin de libérer temporairement les ressources de systèmes pour exécuter une tâche de priorité élevée ou pour effectuer la reconstruction d’index dans une autre fenêtre de maintenance si les fenêtres de maintenance disponibles sont trop courtes pour une grande table. Enfin, la reconstruction d’index en ligne pouvant être reprise ne nécessite pas beaucoup d’espace dans le journal, ce qui vous permet d’effectuer la troncation du journal pendant l’exécution de l’opération de reconstruction pouvant être reprise. Consultez les pages [ALTER INDEX](../t-sql/statements/alter-index-transact-sql.md) et [Instructions pour les opérations d’index en ligne](../relational-databases/indexes/guidelines-for-online-index-operations.md).
- **Option IDENTITY_CACHE pour ALTER DATABASE SCOPED CONFIGURATION**. Une nouvelle option IDENTITY_CACHE a été ajoutée à l’instruction T-SQL `ALTER DATABASE SCOPED CONFIGURATION`. Quand cette option est définie sur `OFF`, elle permet au moteur de base de données d’éviter les trous dans les valeurs des colonnes d’identité si un serveur redémarre de façon inattendue ou bascule sur un serveur secondaire. Consultez la page [ALTER DATABASE SCOPED CONFIGURATION](../t-sql/statements/alter-database-scoped-configuration-transact-sql.md).   
-  [!INCLUDE[ssnoversion](../includes/ssnoversion.md)] offre désormais des fonctionnalités de base de données de graphes pour permettre une modélisation plus significative des données axées sur les relations. Cela comprend une nouvelle syntaxe de [CREATE TABLE](../t-sql/statements/create-table-sql-graph.md) pour créer des tables de nœuds et d’arêtes, ainsi que le mot clé [MATCH](../t-sql/queries/match-sql-graph.md) pour les requêtes. Pour plus d’informations, consultez [Traitement des graphiques avec SQL Server 2017](../relational-databases/graphs/sql-graph-overview.md).   
- Une nouvelle génération d’améliorations du traitement des requêtes, qui adaptent les stratégies d’optimisation aux conditions d’exécution de la charge de travail de votre application. Pour cette première version de la famille de fonctionnalités de **traitement adaptatif des requêtes**, nous avons trois nouvelles améliorations : **jointures adaptatives en mode batch**, **retour d’allocation de mémoire en mode batch** et **exécution entrelacée** pour les fonctions table à instructions multiples.  Consultez [Traitement adaptatif des requêtes dans les bases de données SQL](../relational-databases/performance/adaptive-query-processing.md).
- L’optimisation automatique est une fonctionnalité de base de données qui fournit des insights sur les éventuels problèmes de performances des requêtes, recommande des solutions et corrige automatiquement les problèmes identifiés. L’optimisation automatique de [!INCLUDE[ssnoversion](../includes/ssnoversion.md)] vous avertit chaque fois qu’un problème potentiel de performances est détecté et vous permet d’appliquer des actions correctives ou de laisser le [!INCLUDE[ssde-md](../includes/ssde-md.md)] résoudre automatiquement les problèmes de performances. Pour plus d’informations, consultez [Optimisation automatique](../relational-databases/automatic-tuning/automatic-tuning.md).
- AMÉLIORATION DES PERFORMANCES POUR LA GÉNÉRATION DES INDEX NON-CLUSTER SUR LES TABLES À MÉMOIRE OPTIMISÉE. Les performances de la regénération d’index bwtree (non-cluster) pour les tables MEMORY_OPTIMIZED lors de la récupération d’une base de données ont été considérablement optimisées. Cette amélioration réduit de façon substantielle le temps de récupération de la base de données quand des index non-cluster sont utilisés.  
- [sys.dm_os_sys_info](../relational-databases/system-dynamic-management-views/sys-dm-os-sys-info-transact-sql.md) a trois nouvelles colonnes : socket_count, cores_per_socket et numa_node_count. Ceci est utile lorsque vous exécutez votre serveur dans une machine virtuelle car une valeur NUMA trop élevée risque de créer des hôtes survalidés (overcommited), ce qui, au final, entraîne des problèmes de performances.
- Une nouvelle colonne modified_extent_page_count\, a été introduite dans [sys.dm_db_file_space_usage](../relational-databases/system-dynamic-management-views/sys-dm-db-file-space-usage-transact-sql.md) pour effectuer le suivi des modifications différentielles dans chaque fichier de la base de données. La nouvelle colonne modified_extent_page_count vous permet de générer des solutions de sauvegarde optimisées, qui effectuent une sauvegarde différentielle si le pourcentage des pages qui ont changé dans la base de données ne dépasse pas un certain seuil (disons 70 à 80 %), et qui sinon effectuent une sauvegarde complète de la base de données.
- SELECT INTO … ON groupe_fichiers : [SELECT INTO](../t-sql/queries/select-into-clause-transact-sql.md) prend désormais en charge le chargement d’une table dans un groupe de fichiers autre qu’un groupe de fichiers par défaut de l’utilisateur, avec la prise en charge du mot clé **ON** ajoutée à la syntaxe TSQL de SELECT INTO.
- Améliorations du programme d’installation de tempdb : le programme d’installation permet de spécifier une taille initiale du fichier tempdb allant jusqu’à **256 Go (262 144 Mo)** par fichier, avec un avertissement donné aux clients si la taille du fichier est définie avec une valeur supérieure à 1 Go et si l’initialisation instantanée de fichiers n’est pas activée. Si vous n’activez pas l’initialisation instantanée de fichiers, le temps d’installation peut augmenter de façon exponentielle en fonction de la taille initiale spécifiée pour le fichier de données tempdb. L’initialisation instantanée de fichiers n’est pas applicable à la taille du journal des transactions : si vous spécifiez une valeur supérieure pour le journal des transactions, le temps d’installation peut augmenter invariablement lors du démarrage de tempdb à l’installation, quelle que soit la valeur de l’initialisation instantanée de fichiers pour le compte de service SQL Server.
- Une nouvelle vue de gestion dynamique [sys.dm_tran_version_store_space_usage](../relational-databases/system-dynamic-management-views/sys-dm-tran-version-store-space-usage.md) est introduite pour suivre l’utilisation de la banque des versions par base de données. Cette nouvelle vue de gestion dynamique est utile pour surveiller l’utilisation de la banque des versions dans tempdb, de façon à vous permettre de planifier de façon proactive le dimensionnement de tempdb en fonction des exigences d’utilisation de la banque des versions par base de données, sans pénaliser les performances ni entraîner un travail supplémentaire pour l’exécuter sur des serveurs de production.
- Une nouvelle fonction de gestion dynamique, [sys.dm_db_log_info](../relational-databases/system-dynamic-management-views/sys-dm-db-log-info-transact-sql.md), est introduite pour exposer les informations de fichier journal virtuel similaires à DBCC LOGINFO, afin de surveiller, alerter et éviter les problèmes potentiels du journal des transactions causés par les problèmes de fichiers journaux virtuels, de taille du fichier journal virtuel ou de SHRINKFILE rencontrés par les clients.
- Amélioration des performances de sauvegarde pour les petites bases de données sur les serveurs hautes performances : lors de la sauvegarde des bases de données dans SQL Server, le processus de sauvegarde nécessite plusieurs itérations du pool de mémoires tampons pour drainer les E/S en cours. Par conséquent, la durée de la sauvegarde ne dépend pas simplement de la taille de la base de données, mais aussi de la taille du pool de mémoires tampons actif. Dans SQL Server 2017, la sauvegarde est optimisée de façon à éviter les itérations multiples du pool de mémoires tampons, ce qui améliore considérablement les performances de sauvegarde pour les bases de données petites à moyennes. Le gain de performances diminue avec l’augmentation de la taille de la base de données, car les pages à sauvegarder et les E/S de la sauvegarde prennent plus de temps que les itérations du pool de mémoires tampons.  
- Le magasin des requêtes effectue maintenant le suivi des informations récapitulatives des statistiques d’attente. Le suivi des catégories de statistiques d’attente par requête dans le magasin des requêtes permet d’accéder à un niveau supérieur de l’expérience de résolution des problèmes de performances, en fournissant encore plus d’insights sur les performances des charges de travail et leurs goulots d’étranglement, tout en conservant les avantages clés du magasin des requêtes.  
- Les tables temporelles avec contrôle de version par le système prennent désormais en charge CASCADE DELETE et CASCADE UPDATE.  
- Améliorations des performances des points de contrôle indirects.
- Ajout de la prise en charge des groupes de disponibilité sans cluster.
- Ajout du paramètre des groupes de disponibilité à validation de réplica minimale.
- Les groupes de disponibilité peuvent désormais fonctionner sur Windows-Linux pour activer les migrations entre systèmes d’exploitation et les tests.
- Ajout de la prise en charge de la stratégie de rétention des tables temporelles
- Nouvel élément DMV SYS.DM_DB_STATS_HISTOGRAM.
- Ajout de la prise en charge de la génération et de la regénération d’index columnstore non cluster en ligne
- Le paramètre[Sys.dm_db_stats_histogram (Transact-SQL)](../relational-databases/system-dynamic-management-views/sys-dm-db-stats-histogram-transact-sql.md) est ajouté pour l’examen des statistiques.
- L’Assistant Paramétrage de base de données (DTA) fourni avec SQL Server Management Studio version 16.4 lors de l’analyse de SQL Server 2016 et ultérieur, possède des options supplémentaires.    
   - Performances améliorées. Pour plus d’informations, consultez l’article [Performance Improvements using Database Engine Tuning Advisor (DTA) recommendations (Recommandations relatives à l’amélioration des performances à l’aide de l’Assistant Paramétrage de base de données [DTA])](../relational-databases/performance/performance-improvements-using-dta-recommendations.md).
   - Option `-fc` pour autoriser les recommandations d’index columnstore. Pour plus d’informations, consultez les articles [Utilitaire DTA](../tools/dta/dta-utility.md) et [Columnstore index recommendations in Database Engine Tuning Advisor (DTA) (Recommandations relatives aux index columnstore dans l’Assistant Paramétrage de base de données [DTA])](../relational-databases/performance/columnstore-index-recommendations-in-database-engine-tuning-advisor-dta.md).  
   - Option `-iq` pour autoriser l’Assistant Paramétrage de base de données (DTA) à vérifier une charge de travail du magasin de requêtes. Pour plus d’informations, consultez l’article [Tuning Database Using Workload from Query Store (Paramétrage de base de données à l’aide des charges de travail du magasin de requêtes)](../relational-databases/performance/tuning-database-using-workload-from-query-store.md).  
- Pour les fonctionnalités en mémoire, des améliorations supplémentaires sont apportées aux tables à mémoire optimisée et aux fonctions compilées en mode natif. Pour obtenir des exemples de code qui illustrent ces améliorations, consultez [Optimiser le traitement JSON avec OLTP en mémoire](../relational-databases/json/optimize-json-processing-with-in-memory-oltp.md).
    - Prise en charge des colonnes calculées dans les tables optimisées en mémoire, notamment des index sur les colonnes calculées.
    - Prise en charge complète des fonctions JSON dans des modules compilés en mode natif et dans des contraintes de validation.  
    - Opérateur`CROSS APPLY` dans des modules compilés en mode natif.   
- De nouvelles fonctions de chaîne [CONCAT_WS](../t-sql/functions/concat-ws-transact-sql.md), [TRANSLATE](../t-sql/functions/translate-transact-sql.md) et [TRIM](../t-sql/functions/trim-transact-sql.md) sont ajoutées.   
- La clause `WITHIN GROUP` est maintenant prise en charge pour la fonction [STRING_AGG](../t-sql/functions/string-agg-transact-sql.md).
- Deux nouvelles familles de classements japonais (Japanese_Bushu_Kakusu_140 et Japanese_XJIS_140) ont été ajoutées, et l’option de classement Variation-selector-sensitive (_VSS) a été ajoutée pour une utilisation dans ces nouveaux classements japonais. En outre, tous les nouveaux classements prennent automatiquement en charge les caractères supplémentaires sans avoir à spécifier l’option _SC. Pour plus d’informations, consultez [Prise en charge d’Unicode et du classement](../relational-databases/collations/collation-and-unicode-support.md)   
- De nouvelles options d’accès en bloc ([BULK INSERT](../t-sql/statements/bulk-insert-transact-sql.md) et [OPENROWSET(BULK...)](../t-sql/functions/openrowset-transact-sql.md)) permettent d’accéder directement aux données à partir d’un fichier spécifié au format CSV et à partir de fichiers stockés dans Stockage Blob Azure avec la nouvelle option `BLOB_STORAGE` de [EXTERNAL DATA SOURCE](../t-sql/statements/create-external-data-source-transact-sql.md).
- Le niveau de compatibilité ( **COMPATIBILITY_LEVEL** ) de base de données 140 a été ajouté.   Les clients qui exécutent ce niveau obtiendront les fonctionnalités de langage et les comportements de l’optimiseur de requêtes les plus récents. Cela comprend les modifications apportées à chaque version préliminaire publiée par Microsoft.
- Améliorations apportées au mode de calcul des seuils de mise à jour des statistiques incrémentielles (mode de compatibilité 140 obligatoire).
- [sys.dm_exec_query_statistics_xml](../relational-databases/system-dynamic-management-views/sys-dm-exec-query-statistics-xml-transact-sql.md) a été ajouté.
- Nous avons apporté plusieurs améliorations des performances et du langage pour les objets à mémoire optimisée :
    - `sp_spaceused` est désormais pris en charge pour les tables à mémoire optimisée.
    - `sp_rename` est désormais pris en charge pour les tables à mémoire optimisée et les modules T-SQL compilés en mode natif.
    - Les expressions `CASE` sont désormais prises en charge pour les modules T-SQL compilés en mode natif.
    - La limite de 8 index sur les tables à mémoire optimisée a été supprimée.
    - `TOP (N) WITH TIES` est désormais pris en charge pour les modules T-SQL compilés en mode natif.
    - `ALTER TABLE` appliqué à des tables à mémoire optimisée est désormais considérablement plus rapide.
    - La réapplication du journal des transactions de tables à mémoire optimisée est désormais effectuée en parallèle. Ceci permet des temps de récupération plus rapides et augmente considérablement le débit soutenu par la configuration de groupe de disponibilité AlwaysOn.
    - Les fichiers de groupes de fichiers à mémoire optimisée peuvent désormais être stockés sur Stockage Azure. La sauvegarde et la restauration de fichiers à mémoire optimisée sur Stockage Azure sont aussi désormais disponibles.
- Les index cluster Columnstore prennent désormais en charge les colonnes LOB (nvarchar(max), varchar(max), varbinary(max)).
- La fonction d’agrégation [STRING_AGG](../t-sql/functions/string-agg-transact-sql.md) a été ajoutée.  
- Nouvelles autorisations : `DATABASE SCOPED CREDENTIAL` est maintenant une classe d’éléments sécurisables, prenant en charge les autorisations `CONTROL`, `ALTER`, `REFERENCES`, `TAKE OWNERSHIP`et `VIEW DEFINITION` . `ADMINISTER DATABASE BULK OPERATIONS`, qui est limité à SQL Database, est maintenant visible dans `sys.fn_builtin_permissions`.   
- La DMV [sys.dm_os_host_info](../relational-databases/system-dynamic-management-views/sys-dm-os-host-info-transact-sql.md) a été ajoutée pour fournir des informations sur les systèmes d’exploitation Windows et Linux.   
- Les rôles de base de données sont créés avec R Services pour la gestion des autorisations associées aux packages. Pour plus d’informations, consultez [Gestion des packages R pour SQL Server](../advanced-analytics/r-services/r-package-management-for-sql-server-r-services.md).

